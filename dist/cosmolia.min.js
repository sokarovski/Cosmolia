"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}exports.__esModule=!0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_Renderers=require("./Renderers.js"),_Renderers2=_interopRequireDefault(_Renderers),Cosmolia=function(){function t(e,i){_classCallCheck(this,t),i=i||{},this.data={},this.html={},this.images=[],this.rendering=!0,this.started=!1,this.parent=jQuery(e),this.autoplay=i.autoplay!==!1,this.parser=i.parser||null,this.initResponsive(),this.parseImages(),this.buildLayout(),this.layout(i),this.autoplay&&this.start()}return t.prototype.setRenderer=function(t){this.renderer=t,this.layoutImages()},t.prototype.setImages=function(t){this.images=t,this.carousel&&this.carousel.setImages(t),this.selectedIndex=0,this.layoutImages()},t.prototype.addImage=function(t){this.images.push(t),this.layoutImages()},t.prototype.clearImages=function(){this.images=[],this.carousel&&this.carousel.setImages(this.images),this.selectedIndex=0,this.layoutImages()},t.prototype.setShowInfo=function(t){this.showInfo=t,t?this.html.wrapper.removeClass("cosmolia-st-no-info"):this.html.wrapper.addClass("cosmolia-st-no-info")},t.prototype.setShowCounter=function(t){this.showCounter=t,this.showCounter?this.html.wrapper.removeClass("cosmolia-st-no-counter"):this.html.wrapper.addClass("cosmolia-st-no-counter")},t.prototype.setPauseOnHover=function(t){this.pauseOnHover!=t&&(this.pauseOnHover=t,this.html.imagesSpan.off("mouseenter.cosmolia"),this.html.imagesSpan.off("mouseleave.cosmolia"),t&&this.autoplay&&(this.html.wrapper.on("mouseenter.cosmolia",this.pausePlay.bind(this)),this.html.wrapper.on("mouseleave.cosmolia",this.continuePlay.bind(this))))},t.prototype.setCarouselPosition=function(e){if(e){this.carouselPosition=e;var i=this.getCarousel();i.haltRendering(),e&t.Positions.BOTTOM?(this.html.wrapper.append(i.html.wrapper),this.carousel.setDirection(t.Directions.HORIZONTAL),this.carousel.setProportion(this.carouselFixedProportion,this.carouselRelativeProportion)):e&t.Positions.TOP?(this.html.wrapper.prepend(i.html.wrapper),this.carousel.setDirection(t.Directions.HORIZONTAL),this.carousel.setProportion(this.carouselFixedProportion,this.carouselRelativeProportion)):e&(t.Directions.LEFT|t.Directions.RIGHT)&&(this.html.wrapper.append(i.html.wrapper),this.carousel.setDirection(t.Directions.VERTICAL),this.carousel.setProportion("100%")),this.placeCarousel(),this.html.wrapper.removeClass("cosmolia-cp-top cosmolia-cp-right cosmolia-cp-bottom cosmolia-cp-left"),this.html.wrapper.addClass("cosmolia-cp-"+e),i.resumeRendering(),i.layoutImages()}else this.html.wrapper.removeClass("cosmolia-cp-top cosmolia-cp-right cosmolia-cp-bottom cosmolia-cp-left"),this.carouselPosition=null,this.placeCarousel(),this.carousel&&this.carousel.html.wrapper.detach()},t.prototype.setHasControllButtons=function(t){this.hasControlButtons=t,this.hasControlButtons?(this.html.prevButton.show(),this.html.nextButton.show()):(this.html.prevButton.hide(),this.html.nextButton.hide())},t.prototype.setSlideData=function(t,e){var i=this.images[e];i&&(t.css("background-image","url('"+i.src+"')"),t.find(".cosmolia-item-title").text(i.title),t.find(".cosmolia-item-description").text(i.description),t.find(".cosmolia-item-counter").text(e+1+" / "+this.images.length),t.off("click.cosmolia"),this.onImageClick?(t.attr("href","javascript:;"),t.on("click.cosmolia",this.imageWasClicked.bind(this,e,i))):i.link?t.attr("href",i.link):t.removeAttr("href"))},t.prototype.setProportion=function(t,e){this.fixedProportion=t,this.relativeProportion=e,(t||e)&&(null!=t?(this.html.imagesHolder.css({"padding-bottom":0,height:t}),t.indexOf("%")>-1?this.html.wrapper.css({width:"100%",position:"absolute",height:"100%"}):this.html.wrapper.css({width:"",position:"",height:""})):null!=e&&(this.html.imagesHolder.css({"padding-bottom":100*e+"%",height:0}),this.html.wrapper.css({width:"",position:"",height:""})))},t.prototype.setCarouselProportion=function(e,i){this.carouselFixedProportion=e,this.carouselRelativeProportion=i,this.carousel&&(this.carouselPosition&(t.Positions.LEFT|t.Positions.RIGHT)?this.placeCarousel():this.carousel.setProportion(e,i))},t.prototype.setItems=function(t){this.html.wrapper.removeClass("cosmolia-cp-items-1 cosmolia-cp-items-2 cosmolia-cp-items-3 cosmolia-cp-items-4"),this.html.wrapper.addClass("cosmolia-cp-items-"+t),this.items=t,this.itemsWidth=100/t,this.layoutImages()},t.prototype.setCarouselItems=function(t){this.carouselItems=t,this.carousel&&this.carousel.setItems(t)},t.prototype.setOffset=function(t){this.offset=t,this.rendering&&this.renderer.switchTo(this,this.selectedIndex)},t.prototype.setCarouselOffset=function(t){this.carousel&&this.carousel.setOffset(t)},t.prototype.setInterval=function(t){if(this.interval=t,this.started){var e=this.paused;this.stop(),this.start(),this.paused=e}},t.prototype.setAnimationSpeed=function(t){this.animationSpeed=t},t.prototype.setDirection=function(e){e&&(this.direction=e,this.renderer&&this.renderer.willRotate(this),e==t.Directions.VERTICAL?this.directionDictionary={left:"top",width:"height"}:e==t.Directions.HORIZONTAL&&(this.directionDictionary={left:"left",width:"width"}))},t.prototype.setOnImageClick=function(t){null!=this.onImageClick&&null!=t?this.onImageClick=t:this.onImageClick!=t&&(this.onImageClick=t,this.layoutImages())},t.prototype.setImageContain=function(t){this.imageContain=t,t?this.html.wrapper.addClass("cosmolia-images-style-contain"):this.html.wrapper.removeClass("cosmolia-images-style-contain")},t.prototype.setResponsive=function(t){t&&!this.isResponsiveSet?(jQuery(window).on("resize",this.responsiveHandler),this.lastWindowSize=0,this.isResponsiveSet=!0,this.onWindowResizeResponsive()):this.isResponsiveSet&&(jQuery(window).off("resize",this.responsiveHandler),this.isResponsiveSet=!1,this.calculateImagesVisibility(1e7))},t.prototype.initResponsive=function(){this.responsiveHandler=this.onWindowResizeResponsive.bind(this)},t.prototype.onWindowResizeResponsive=function(){var t=jQuery(window).width();this.calculateImagesVisibility(t)},t.prototype.calculateImagesVisibility=function(t){1!=this.lastWindowSize&&t<769?(this.lastWindowSize=1,this.setItems(1)):2!=this.lastWindowSize&&t>768&&(this.lastWindowSize=2,this.setItems(3))},t.prototype.buildLayout=function(){var t=jQuery('<div class="cosmolia-wrapper"></div>'),e=jQuery('<div class="cosmolia-images-positioner"></div>'),i=jQuery('<div class="cosmolia-images-sizer"></div>'),s=jQuery('<div class="cosmolia-images-tube"></div>'),o=jQuery('<div class="cosmolia-images-span"></div>');t.append(e),e.append(i),i.append(s),s.append(o);var a=jQuery('<a href="javascript:;" class="cosmolia-prev"></a>'),n=jQuery('<a href="javascript:;" class="cosmolia-next"></a>');s.append(a),s.append(n),a.on("click",this.prev.bind(this)),n.on("click",this.next.bind(this)),this.html.wrapper=t,this.html.imagesPositioner=e,this.html.imagesHolder=i,this.html.imagesTube=s,this.html.imagesSpan=o,this.html.prevButton=a,this.html.nextButton=n,this.parent.empty(),this.parent.append(t)},t.prototype.layout=function(e){e=e||{},this.haltRendering(),this.setDirection(e.direction||t.Directions.HORIZONTAL),this.setRenderer(e.renderer||t.Renderers.Scroll),this.setInterval(e.interval||4e3),this.setAnimationSpeed(e.animationSpeed||300),this.setCarouselProportion(e.carouselFixedProportion,e.carouselRelativeProportion||.25),this.setItems(e.items||1),this.setShowInfo(e.showInfo!==!1),this.setShowCounter(e.showCounter!==!1),this.setPauseOnHover(e.pauseOnHover!==!1),this.setCarouselPosition(e.carouselPosition||null),this.setHasControllButtons(e.hasControllButtons!==!1),this.setProportion(e.fixedProportion,e.relativeProportion),this.setCarouselItems(e.carouselItems||3),this.setOffset(e.offset||0),this.setCarouselOffset(e.carouselOffset||-1),this.setOnImageClick(e.onImageClick||null),this.setImageContain(!!e.imageContain),this.setResponsive(!!e.responsive),this.resumeRendering(),this.layoutImages()},t.prototype.layoutImages=function(){this.rendering&&this.renderer.layout(this)},t.prototype.createSlide=function(){var t=jQuery('<a class="cosmolia-item"></a>'),e=jQuery('<div class="cosmolia-item-meta"></div>'),i=jQuery('<div class="cosmolia-item-title"></div>'),s=jQuery('<div class="cosmolia-item-description"></div>'),o=jQuery('<div class="cosmolia-item-counter"></div>');return t.append(e),e.append(o),e.append(i),e.append(s),t},t.prototype.getCarousel=function(){return this.carousel?(this.carousel.setImages(this.images),this.carousel):(this.carousel=new t(null,{fixedProportion:this.carouselFixedProportion,relativeProportion:this.carouselRelativeProportion,autoplay:!1,renderer:t.Renderers.ScrollThumb,carouselPosition:null,showInfo:!1,showCounter:!1,hasControllButtons:!1,pauseOnHover:!1,items:this.carouselItems,onImageClick:this.moveTo.bind(this)}),this.carousel.setImages(this.images),this.carousel)},t.prototype.parseImages=function(){if(this.parser)return this.parser(this.parent,this.images),null;for(var t=this.parent.find("img"),e=[],i=0;i<t.length;i++){var s=jQuery(t[i]),o=s.attr("src");e.push({src:o,title:s.attr("title"),description:"",link:o})}this.images=e,this.carousel&&(this.carousel.images=e)},t.prototype.imageWasClicked=function(t,e){this.onImageClick(t,e)},t.prototype.getNextIndex=function(){return this.moduloIndex(this.selectedIndex+1)},t.prototype.getPreviousIndex=function(){return this.moduloIndex(this.selectedIndex-1)},t.prototype.moduloIndex=function(t){if(t<0)for(;t<0&&this.images.length>0;)t+=this.images.length;return Math.abs(t%this.images.length)},t.prototype.evaluateCarouselProportion=function(){return null!=this.carouselFixedProportion?this.carouselFixedProportion:null!=this.carouselRelativeProportion?100*this.carouselRelativeProportion+"%":"50px;"},t.prototype.placeCarousel=function(){var e=this.carouselPosition,i=this.evaluateCarouselProportion(),s={"margin-left":"0","margin-right":"0"},o="";e&t.Positions.LEFT&&(s["margin-right"]=i,o=i),e&t.Positions.RIGHT&&(s["margin-left"]=i,o=i),this.html.imagesPositioner.css(s),this.carousel&&this.carousel.html.wrapper.css("width",o)},t.prototype.switchTo=function(t){this.renderer.switchTo(this,t)},t.prototype.moveTo=function(t){this.renderer.moveTo(this,t)},t.prototype.next=function(){this.renderer.next(this)},t.prototype.prev=function(){this.renderer.prev(this)},t.prototype.start=function(){this.started||(this.timer=setInterval(this.step.bind(this),this.interval),this.started=!0,this.paused=!1)},t.prototype.stop=function(){clearInterval(this.timer),this.started=!1,this.paused=!0},t.prototype.pausePlay=function(){this.paused=!0},t.prototype.continuePlay=function(){this.paused=!1},t.prototype.step=function(){this.paused||this.next()},t.prototype.willStartSwitchingSlide=function(t,e){this.selectedIndex=t||0,this.carousel&&(e?this.carousel.moveTo(t):this.carousel.switchTo(t)),this.clearActiveSlide()},t.prototype.didEndSwitchingSlide=function(t,e){this.markActiveSlide(t)},t.prototype.haltRendering=function(){this.rendering=!1},t.prototype.resumeRendering=function(){this.rendering=!0},t.prototype.clearActiveSlide=function(){this.html.imagesSpan.find(".cosmolia-active-slide").removeClass("cosmolia-active-slide")},t.prototype.markActiveSlide=function(t){var e=this.getSlideFromCache(t);e&&e.addClass("cosmolia-active-slide")},t.prototype.resetSlideCache=function(){this.data.slideCaches={}},t.prototype.addSlideToCache=function(t,e){this.data.slideCaches["cache_"+t]=e},t.prototype.getSlideFromCache=function(t){if(this.data.slideCaches["cache_"+t])return this.data.slideCaches["cache_"+t]},t.jQueryPlugin=function(e){if(!jQuery(this).length)return jQuery(this);var i=jQuery(this).data("Cosmolia");return i&&0!=e.indexOf("_")&&i[e]&&"function"==typeof i[e]?i[e](Array.prototype.slice.call(arguments,1)):"object"!==("undefined"==typeof e?"undefined":_typeof(e))&&e?void(i?jQuery.error("Method "+e+" does not exist."):jQuery.error("Cosmolia must be initialised before using method: "+e)):(i=new t(jQuery(this),e),jQuery(this).data("Cosmolia",i),jQuery(this))},t}();Cosmolia.Renderers=_Renderers2.default,exports.default=Cosmolia,jQuery.fn.Cosmolia=Cosmolia.jQueryPlugin,Cosmolia.Directions={VERTICAL:1,HORIZONTAL:2},Cosmolia.Positions={TOP:1,RIGHT:2,BOTTOM:4,LEFT:8},exports.__esModule=!0;var _Basic=require("./Renderers/Basic.js"),_Basic2=_interopRequireDefault(_Basic),_Scroll=require("./Renderers/Scroll.js"),_Scroll2=_interopRequireDefault(_Scroll);exports.default={Basic:_Basic2.default,Scroll:_Scroll2.default},exports.__esModule=!0,exports.default={willRotate:function(t){t.html.imageSpan.css(t.directionDictionary.left,null)},layout:function(t){t.html.imagesSpan.empty(),t.html.imagesSpan.css("left","0%");var e=0-t.items,i=t.images.length+t.items;t.resetSlideCache();for(var s=e;s<i;s++){var o=t.createSlide(),a=t.moduloIndex(s);o.css("width",t.itemsWidth+"%"),o.css("left",s*t.itemsWidth+"%"),t.addSlideToCache(o,s),t.setSlideData(o,a),t.html.imagesSpan.append(o)}this.switchTo(t,t.selectedIndex)},next:function(t){var e=t.getNextIndex();this.change(t,e,!0)},prev:function(t){var e=t.getPreviousIndex();this.change(t,e,!0)},moveTo:function(t,e){this.change(t,e,!0)},switchTo:function(t,e){this.change(t,e,!1)},change:function(t,e,i){var e=t.moduloIndex(e);t.willStartSwitchingSlide(e,i),t.html.imagesSpan.css({left:-1*(e+t.offset)*t.itemsWidth+"%"}),t.didEndSwitchingSlide(e,i)}},Cosmolia.Renderers.Opacity={willRotate:function(t){t.html.imageSpan.css(t.directionDictionary.left,null)},layout:function(t){t.html.imagesSpan.empty(),t.resetSlideCache();for(var e=0;e<t.images.length;e++){var i=t.createSlide(),s=t.moduloIndex(e);t.addSlideToCache(e,i),i.css("opacity",0),t.setSlideData(i,s),t.html.imagesSpan.append(i)}this.switchTo(t,t.selectedIndex)},next:function(t){var e=t.getNextIndex();this.change(t,e,!0,-1)},prev:function(t){var e=t.getPreviousIndex();this.change(t,e,!0,1)},moveTo:function(t,e){var e=t.moduloIndex(e);this.change(t,e,!0,0)},switchTo:function(t,e){var e=t.moduloIndex(e);this.change(t,e,!1)},change:function(t,e,i){var s=t.getSlideFromCache(t.selectedIndex);t.willStartSwitchingSlide(e,i);var o=t.getSlideFromCache(e);o&&(i?(o.css({opacity:0}),t.html.imagesSpan.append(o),o.animate({opacity:1},t.animationSpeed,t.didEndSwitchingSlide(t,e,i))):(t.html.imagesSpan.append(o),o.css({opacity:1}),t.didEndSwitchingSlide(e,i))),s&&s!=o&&(i?s.delay(300).animate({opacity:0},t.animationSpeed-300):s.css({opacity:0}))}},exports.__esModule=!0,exports.default={willRotate:function(t){t.html.imagesSpan.css(t.directionDictionary.left,"")},layout:function(t){t.html.imagesSpan.empty();var e=0-t.items,i=t.images.length+t.items;t.resetSlideCache();for(var s=e;s<i;s++){var o=t.createSlide(),a=t.moduloIndex(s);o.css(t.directionDictionary.width,t.itemsWidth+"%"),o.css(t.directionDictionary.left,s*t.itemsWidth+"%"),t.addSlideToCache(s,o),t.setSlideData(o,a),t.html.imagesSpan.append(o)}this.switchTo(t,t.selectedIndex)},next:function(t){var e=t.selectedIndex,i=t.getNextIndex(),s=i<=e?e+1:null;this.change(t,i,!0,!0,s)},prev:function(t){var e=t.selectedIndex,i=t.getPreviousIndex(),s=i>=e?e-1:null;this.change(t,i,!0,!0,s)},moveTo:function(t,e){var e=t.moduloIndex(e);this.change(t,e,!0,!0)},switchTo:function(t,e){var e=t.moduloIndex(e);this.change(t,e,!1,!1)},change:function(t,e,i,s,o){if(t.willStartSwitchingSlide(e,i),s){var a;o?a=this.change.bind(this,t,e,i,!1):(a=t.didEndSwitchingSlide.bind(t,e,i),o=e);var n={};n[t.directionDictionary.left]=-1*(o+t.offset)*t.itemsWidth+"%",t.html.imagesSpan.animate(n,t.animationSpeed,a)}else t.html.imagesSpan.css(t.directionDictionary.left,-1*(e+t.offset)*t.itemsWidth+"%"),t.didEndSwitchingSlide(e,i)}},Cosmolia.Renderers.ScrollThumb=Object.create(Cosmolia.Renderers.Scroll),Cosmolia.Renderers.ScrollThumb.layout=function(t){t.html.imagesSpan.empty();var e=0,i=t.images.length;t.resetSlideCache();for(var s=e;s<i;s++){var o=t.createSlide(),a=t.moduloIndex(s);t.addSlideToCache(s,o),o.css(t.directionDictionary.width,t.itemsWidth+"%"),o.css(t.directionDictionary.left,s*t.itemsWidth+"%"),t.setSlideData(o,a),t.html.imagesSpan.append(o)}this.switchTo(t,t.selectedIndex)},Cosmolia.Renderers.Slide=Object.create(Cosmolia.Renderers.Opacity),Cosmolia.Renderers.Slide.change=function(t,e,i,s){var o=t.getSlideFromCache(t.selectedIndex);t.willStartSwitchingSlide(e,i);var a=t.getSlideFromCache(e);if(a)if(i){var n={opacity:0};n[t.directionDictionary.left]=100*s+"%",a.css(n),t.html.imagesSpan.append(a);var n={opacity:1};n[t.directionDictionary.left]=0,a.animate(n,t.animationSpeed,t.didEndSwitchingSlide(t,e,i))}else{var n={opacity:1};n[t.directionDictionary.left]=0,t.html.imagesSpan.append(a),a.css(n),t.didEndSwitchingSlide(e,i)}o&&o!=a&&(i?o.animate({opacity:0},t.animationSpeed):o.css({opacity:0}))};
//# sourceMappingURL=cosmolia.min.js.map
